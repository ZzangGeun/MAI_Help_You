# ğŸ¤ í˜‘ì—…ì„ ìœ„í•œ API ë¬¸ì„œí™” ê°€ì´ë“œ

## ğŸ“‹ ëª©ì°¨
1. [ë¹ ë¥¸ ì‹œì‘](#ë¹ ë¥¸-ì‹œì‘)
2. [ë¬¸ì„œ êµ¬ì¡°](#ë¬¸ì„œ-êµ¬ì¡°)
3. [í˜‘ì—… ê·œì¹™](#í˜‘ì—…-ê·œì¹™)
4. [ê°œë°œ ì›Œí¬í”Œë¡œìš°](#ê°œë°œ-ì›Œí¬í”Œë¡œìš°)
5. [ë¬¸ì œ í•´ê²°](#ë¬¸ì œ-í•´ê²°)

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### 1ë‹¨ê³„: í™˜ê²½ ì„¤ì •
```bash
# í”„ë¡œì íŠ¸ í´ë¡  í›„
cd MAI_Help_You/docs

# Node.js í™˜ê²½ (ì¶”ì²œ)
chmod +x scripts/setup.sh
./scripts/setup.sh

# ë˜ëŠ” Python í™˜ê²½
python scripts/serve-docs.py
```

### 2ë‹¨ê³„: ë¬¸ì„œ í™•ì¸
- **Swagger UI**: `npm run docs:serve` â†’ http://localhost:3001
- **ê°„ë‹¨ í™•ì¸**: `python scripts/serve-docs.py` â†’ http://localhost:3001
- **ë¹Œë“œ í…ŒìŠ¤íŠ¸**: `npm run docs:build`

### 3ë‹¨ê³„: ê°œë°œ ì‹œì‘
1. ë‹´ë‹¹ ê¸°ëŠ¥ì˜ `.yaml` íŒŒì¼ í™•ì¸
2. API ë³€ê²½ ì‹œ ë¬¸ì„œ ë¨¼ì € ì—…ë°ì´íŠ¸
3. PR ì „ì— `npm run docs:validate` ì‹¤í–‰

## ğŸ“ ë¬¸ì„œ êµ¬ì¡°

```
docs/
â”œâ”€â”€ README.md                    # ê¸°ë³¸ ì‚¬ìš©ë²•
â”œâ”€â”€ COLLABORATION_GUIDE.md       # ì´ íŒŒì¼ - í˜‘ì—… ê°€ì´ë“œ
â”œâ”€â”€ package.json                 # Node.js ë„êµ¬ ì„¤ì •
â”œâ”€â”€ api/                        # API ëª…ì„¸ì„œë“¤
â”‚   â”œâ”€â”€ openapi.yaml            # ğŸ¯ ë©”ì¸ í†µí•© ëª…ì„¸ì„œ
â”‚   â”œâ”€â”€ auth.yaml               # ì¸ì¦/ë¡œê·¸ì¸ (@sns_login ë‹´ë‹¹ì)
â”‚   â”œâ”€â”€ chatbot.yaml            # ì±—ë´‡ ëŒ€í™” (@chatbot ë‹´ë‹¹ì)
â”‚   â”œâ”€â”€ character.yaml          # ìºë¦­í„° ì •ë³´ (@character_info ë‹´ë‹¹ì)
â”‚   â”œâ”€â”€ main.yaml               # ë©”ì¸ í˜ì´ì§€ (@main_page ë‹´ë‹¹ì)
â”‚   â””â”€â”€ fastapi.yaml            # AI ëª¨ë¸ ì„œë¹„ìŠ¤ (@AI ë‹´ë‹¹ì)
â”œâ”€â”€ schemas/                    # ê³µí†µ ìŠ¤í‚¤ë§ˆ
â”‚   â”œâ”€â”€ common.yaml             # ê³µí†µ ì‘ë‹µ/íŒŒë¼ë¯¸í„°
â”‚   â””â”€â”€ models.yaml             # ë°ì´í„° ëª¨ë¸ ì •ì˜
â”œâ”€â”€ scripts/                    # ë„êµ¬ ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ setup.sh                # í™˜ê²½ ì„¤ì •
â”‚   â””â”€â”€ serve-docs.py           # Python ì„œë²„
â”œâ”€â”€ postman/                    # Postman ì»¬ë ‰ì…˜ (ìë™ ìƒì„±)
â””â”€â”€ build/                      # ë¹Œë“œ ê²°ê³¼ë¬¼ (ìë™ ìƒì„±)
```

## ğŸ¯ ë‹´ë‹¹ìë³„ ì—­í• 

| ë‹´ë‹¹ ì˜ì—­ | íŒŒì¼ | ë‹´ë‹¹ì | ì£¼ìš” API |
|----------|------|--------|----------|
| **ì¸ì¦ ì‹œìŠ¤í…œ** | `auth.yaml` | @sns_login | ë¡œê·¸ì¸, ë¡œê·¸ì•„ì›ƒ, í† í° |
| **ì±—ë´‡ ëŒ€í™”** | `chatbot.yaml` | @chatbot | ì§ˆë¬¸/ë‹µë³€, íˆìŠ¤í† ë¦¬ |
| **ìºë¦­í„° ì •ë³´** | `character.yaml` | @character_info | ìºë¦­í„° ì¡°íšŒ/ê²€ìƒ‰ |
| **ë©”ì¸ í˜ì´ì§€** | `main.yaml` | @main_page | ê³µì§€ì‚¬í•­, ì´ë²¤íŠ¸ |
| **AI ëª¨ë¸** | `fastapi.yaml` | @AI | ëª¨ë¸ ì§ì ‘ í˜¸ì¶œ |
| **í†µí•© ê´€ë¦¬** | `openapi.yaml` | @íŒ€ì¥ | ì „ì²´ êµ¬ì¡° ê´€ë¦¬ |

## ğŸ“ í˜‘ì—… ê·œì¹™

### âœ… í•´ì•¼ í•  ê²ƒ
1. **API ë³€ê²½ ì „ ë¬¸ì„œ ë¨¼ì € ì‘ì„±**
   ```bash
   # ì˜ˆ: ìƒˆ ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€ ì‹œ
   1. docs/api/chatbot.yaml ìˆ˜ì •
   2. npm run docs:validate í™•ì¸
   3. ì½”ë“œ êµ¬í˜„
   4. í…ŒìŠ¤íŠ¸ í›„ PR
   ```

2. **ì»¤ë°‹ ë©”ì‹œì§€ ê·œì¹™**
   ```bash
   docs: chatbot APIì— ìŠ¤íŠ¸ë¦¬ë° ì‘ë‹µ ì¶”ê°€
   docs: character ê²€ìƒ‰ íŒŒë¼ë¯¸í„° ìˆ˜ì •
   fix: auth API ì‘ë‹µ ìŠ¤í‚¤ë§ˆ ì˜¤íƒ€ ìˆ˜ì •
   ```

3. **PR ì²´í¬ë¦¬ìŠ¤íŠ¸**
   - [ ] í•´ë‹¹ .yaml íŒŒì¼ ì—…ë°ì´íŠ¸ ì™„ë£Œ
   - [ ] `npm run docs:validate` í†µê³¼
   - [ ] ì‹¤ì œ APIì™€ ë¬¸ì„œ ì¼ì¹˜ í™•ì¸
   - [ ] ì˜ˆì‹œ ìš”ì²­/ì‘ë‹µ ì—…ë°ì´íŠ¸

### âŒ í•˜ì§€ ë§ì•„ì•¼ í•  ê²ƒ
1. **êµ¬í˜„ í›„ ë¬¸ì„œ ì‘ì„±** (ë¬¸ì„œ ë™ê¸°í™” ëˆ„ë½ ìœ„í—˜)
2. **ë‹¤ë¥¸ íŒ€ì› ë‹´ë‹¹ íŒŒì¼ ë¬´ë‹¨ ìˆ˜ì •**
3. **openapi.yaml ì§ì ‘ ìˆ˜ì •** (í†µí•© ë‹´ë‹¹ìì™€ í˜‘ì˜)
4. **ê²€ì¦ ì—†ì´ PR** (`docs:validate` ì‹¤íŒ¨ ì‹œ ë¨¸ì§€ ê¸ˆì§€)

## ğŸ”„ ê°œë°œ ì›Œí¬í”Œë¡œìš°

### ìƒˆë¡œìš´ API ê°œë°œ ì‹œ
```mermaid
graph TD
    A[ìš”êµ¬ì‚¬í•­ ì •ì˜] --> B[API ì„¤ê³„ íšŒì˜]
    B --> C[ë‹´ë‹¹ìê°€ .yaml íŒŒì¼ ì‘ì„±]
    C --> D[íŒ€ ë¦¬ë·° ë° ìŠ¹ì¸]
    D --> E[ì½”ë“œ êµ¬í˜„]
    E --> F[API í…ŒìŠ¤íŠ¸]
    F --> G[ë¬¸ì„œì™€ ì‹¤ì œ ë™ì‘ ë¹„êµ]
    G --> H{ì¼ì¹˜í•˜ëŠ”ê°€?}
    H -->|No| I[ë¬¸ì„œ ë˜ëŠ” ì½”ë“œ ìˆ˜ì •]
    I --> F
    H -->|Yes| J[PR ìƒì„± ë° ë¨¸ì§€]
```

### ê¸°ì¡´ API ìˆ˜ì • ì‹œ
```mermaid
graph TD
    A[ë³€ê²½ ìš”êµ¬ì‚¬í•­] --> B[ì˜í–¥ë„ ë¶„ì„]
    B --> C[ë¬¸ì„œ ë¨¼ì € ìˆ˜ì •]
    C --> D[Breaking Change?]
    D -->|Yes| E[ë²„ì „ ë…¼ì˜]
    D -->|No| F[ì½”ë“œ ìˆ˜ì •]
    E --> F
    F --> G[í…ŒìŠ¤íŠ¸ ë° ê²€ì¦]
    G --> H[PR ë° ë°°í¬]
```

## ğŸ› ï¸ ê°œë°œ ë„êµ¬ í™œìš©

### 1. ì‹¤ì‹œê°„ ë¬¸ì„œ í™•ì¸
```bash
# ë°±ê·¸ë¼ìš´ë“œì—ì„œ ë¬¸ì„œ ì„œë²„ ì‹¤í–‰
npm run docs:serve &

# ì½”ë“œ ìˆ˜ì •í•˜ë©´ì„œ ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:3001 í™•ì¸
# íŒŒì¼ ì €ì¥ ì‹œ ìë™ ìƒˆë¡œê³ ì¹¨
```

### 2. API í…ŒìŠ¤íŠ¸
```bash
# Postman ì»¬ë ‰ì…˜ ìƒì„±
npm run postman:convert

# ìƒì„±ëœ íŒŒì¼: postman/MAI_Chatbot.postman_collection.json
# Postmanì—ì„œ Importí•˜ì—¬ API í…ŒìŠ¤íŠ¸
```

### 3. ë¬¸ì„œ í’ˆì§ˆ ê´€ë¦¬
```bash
# ë¬¸ë²• ê²€ì‚¬
npm run docs:validate

# ì •ì  ë¬¸ì„œ ë¹Œë“œ
npm run docs:build

# ë²ˆë“¤ë§ (ë°°í¬ìš©)
npm run docs:bundle
```

### 4. VS Code í™•ì¥ ê¶Œì¥
- **OpenAPI (Swagger) Editor**: YAML ë¬¸ë²• ê²€ì‚¬ ë° ë¯¸ë¦¬ë³´ê¸°
- **YAML**: YAML íŒŒì¼ ë¬¸ë²• í•˜ì´ë¼ì´íŒ…
- **REST Client**: `.http` íŒŒì¼ë¡œ API í…ŒìŠ¤íŠ¸

## ğŸ” ë¬¸ì œ í•´ê²°

### ìì£¼ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜

#### 1. `$ref` ê²½ë¡œ ì˜¤ë¥˜
```yaml
# âŒ ì˜ëª»ëœ ê²½ë¡œ
$ref: './common.yaml#/components/schemas/User'

# âœ… ì˜¬ë°”ë¥¸ ê²½ë¡œ
$ref: '../schemas/common.yaml#/components/schemas/User'
```

#### 2. YAML ë¬¸ë²• ì˜¤ë¥˜
```bash
# ê²€ì¦ ë„êµ¬ ì‹¤í–‰
npm run docs:validate

# ì˜¤ë¥˜ ìœ„ì¹˜ì™€ ë‚´ìš© í™•ì¸
# ëŒ€ë¶€ë¶„ ë“¤ì—¬ì“°ê¸° ë˜ëŠ” íŠ¹ìˆ˜ë¬¸ì ì´ìŠ¤ì¼€ì´í”„ ë¬¸ì œ
```

#### 3. ìˆœí™˜ ì°¸ì¡° (Circular Reference)
```yaml
# âŒ Aê°€ Bë¥¼ ì°¸ì¡°í•˜ê³  Bê°€ Aë¥¼ ì°¸ì¡°
UserSchema:
  $ref: '#/components/schemas/Profile'
ProfileSchema:
  $ref: '#/components/schemas/User'  # ìˆœí™˜ ì°¸ì¡°!

# âœ… ê³µí†µ ìŠ¤í‚¤ë§ˆë¡œ ë¶„ë¦¬
BaseUser:
  type: object
  properties:
    id: { type: integer }
```

### ê°œë°œ í™˜ê²½ë³„ ê°€ì´ë“œ

#### Node.js ì—†ëŠ” í™˜ê²½
```bash
# Pythonë§Œìœ¼ë¡œ ê°„ë‹¨ í™•ì¸
python docs/scripts/serve-docs.py

# ë˜ëŠ” Django ê°œë°œ ì„œë²„ì—ì„œ ì •ì  íŒŒì¼ë¡œ ì„œë¹™
python manage.py collectstatic
# static/docs/ ë””ë ‰í† ë¦¬ì— ë°°ì¹˜
```

#### Windows í™˜ê²½
```cmd
REM Git Bash ë˜ëŠ” WSL ì‚¬ìš© ê¶Œì¥
bash docs/scripts/setup.sh

REM ë˜ëŠ” PowerShellì—ì„œ
npm install -g @redocly/cli
cd docs
npm run docs:serve
```

## ğŸ“ ì§€ì› ë° ë¬¸ì˜

### ë¬¸ì„œ ê´€ë ¨ ì´ìŠˆ
1. **GitHub Issues**: API ë¬¸ì„œ ë²„ê·¸ë‚˜ ê°œì„ ì‚¬í•­
2. **íŒ€ Slack**: `#api-docs` ì±„ë„
3. **ì½”ë“œ ë¦¬ë·°**: PRì—ì„œ `@docs-reviewer` ë©˜ì…˜

### ê¸´ê¸‰í•œ ë¬¸ì œ
- **ë¬¸ì„œ ì„œë²„ ë‹¤ìš´**: Python ì„œë²„ë¡œ ëŒ€ì²´ ì‚¬ìš©
- **ë¹Œë“œ ì‹¤íŒ¨**: `.yaml` íŒŒì¼ ë¬¸ë²• ê²€ì‚¬
- **API ë¶ˆì¼ì¹˜**: í•´ë‹¹ ë‹´ë‹¹ìì™€ ì¦‰ì‹œ ë™ê¸°í™”

## ğŸ“š ì°¸ê³  ìë£Œ

- [OpenAPI 3.0 ëª…ì„¸](https://spec.openapis.org/oas/v3.0.3)
- [Redocly CLI ë¬¸ì„œ](https://redocly.com/docs/cli/)
- [YAML ë¬¸ë²• ê°€ì´ë“œ](https://yaml.org/spec/1.2.2/)
- [Swagger UI ì‚¬ìš©ë²•](https://swagger.io/tools/swagger-ui/)

---

**ğŸ“ ì´ ê°€ì´ë“œëŠ” íŒ€ì˜ í˜‘ì—… íš¨ìœ¨ì„±ì„ ë†’ì´ê¸° ìœ„í•´ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.**  
**ê¶ê¸ˆí•œ ì ì´ë‚˜ ê°œì„ ì‚¬í•­ì´ ìˆìœ¼ë©´ ì–¸ì œë“  ì œì•ˆí•´ì£¼ì„¸ìš”! ğŸš€**
